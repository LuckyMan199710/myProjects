(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-691eb8ac"],{"21b9":function(e,t,a){},"7b8b":function(e,t,a){"use strict";var s=a("21b9"),o=a.n(s);o.a},fc56:function(e,t,a){"use strict";a.r(t);var s,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register"},[a("van-form",{attrs:{"validate-first":""},on:{submit:e.onSubmit}},[a("van-field",{attrs:{"left-icon":"manager-o",name:"emailNum",label:"账号",placeholder:"邮箱",rules:[{pattern:e.pattern,message:"请输入正确的邮箱"}]},model:{value:e.emailNum,callback:function(t){e.emailNum=t},expression:"emailNum"}}),a("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码","left-icon":"smile-comment-o",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("van-field",{attrs:{center:"",clearable:"",label:"验证码","left-icon":"chat-o",placeholder:"请输入邮箱验证码",name:"code"},scopedSlots:e._u([{key:"button",fn:function(){return[a("van-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],attrs:{size:"small",type:"info","native-type":"button"},on:{click:e.sendCode}},[e._v("发送验证码")]),a("van-button",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],attrs:{size:"small",type:"info",disabled:""}},[e._v(e._s(e.count)+"s")])]},proxy:!0}]),model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 注册账号 ")])],1)],1)],1)},n=[],c=(a("ac1f"),a("498a"),a("ade3")),i=(a("e7e5"),a("d399")),r=(a("66b9"),a("b650")),l=(a("be7f"),a("565f")),u=(a("38d5"),a("772a")),m={components:(s={},Object(c["a"])(s,u["a"].name,u["a"]),Object(c["a"])(s,l["a"].name,l["a"]),Object(c["a"])(s,r["a"].name,r["a"]),Object(c["a"])(s,i["a"].name,i["a"]),s),mounted:function(){this.$store.commit("changeTabbarStatusFalse"),this.$store.commit("changeNavBarStatusTrue")},data:function(){return{emailNum:"",pattern:/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,show:!0,count:"",timer:null,code:"",password:""}},methods:{sendCode:function(){var e=this;""!==this.emailNum.trim()&&this.pattern.exec(this.emailNum)?this.$http.get("http://localhost:3000/user/sendCode",{params:{userName:this.emailNum}}).then((function(t){if("success"===t.data.msg){Object(i["a"])("验证码已发送,请注意查收");var a=60;e.timer||(e.count=a,e.show=!1,e.timer=setInterval((function(){e.count>0&&e.count<=a?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)}),1e3))}else console.log(t),Object(i["a"])("验证码发送失败！请重试！")})).catch((function(e){Object(i["a"])("验证码发送失败！请重试！"),console.log(e)})):Object(i["a"])("请输入正确的账号！")},onSubmit:function(e){var t=this;""===e.code?Object(i["a"])("请输入验证码!"):e.password.length<8?Object(i["a"])("密码长度必须大于8位！"):this.$http.post("http://localhost:3000/user/register",{emailNum:e.emailNum,password:e.password,code:e.code}).then((function(e){"userName already exists"===e.data.msg?Object(i["a"])("账号已存在！"):"failed to save data!"===e.data.msg?Object(i["a"])("注册失败！请重试！"):"error code"===e.data.msg?Object(i["a"])("验证码错误！"):(Object(i["a"])("注册成功！"),t.$router.push("/login"))})).catch((function(){Object(i["a"])("注册失败！请重试！")}))}}},d=m,b=(a("7b8b"),a("2877")),p=Object(b["a"])(d,o,n,!1,null,"6a34cb09",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-691eb8ac.0508d176.js.map